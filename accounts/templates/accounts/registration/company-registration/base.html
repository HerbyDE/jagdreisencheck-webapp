{% extends 'accounts/registration/base.html' %}
{% load i18n sekizai_tags staticfiles %}

{% block title %}{% trans 'Register as Company' %}{% endblock %}

{% block meta-description-page %}{% endblock %}

{% block meta-keywords %}{% endblock %}

{% block registration-body %}

  <div class="container" style="margin-top: 30px;">

    {% if profile_form.errors or profile_form.non_field_errors or user_form.errors or user_form.non_field_errors %}
    <div class="row errorlist mb-3">
      <div class="col-xs-12 col-lg-8 offset-lg-2">
        <div class="card">
          <div class="card-body">

            <h3 class="card-title">{% trans 'Errors' %}</h3>
            <hr/>

            {% include 'base/components/forms/error-handler/form-error.html' with form=user_form %}
            {{ user_form.non_field_errors }}

            {% include 'base/components/forms/error-handler/form-error.html' with form=profile_form %}
            {{ profile_form.non_field_errors }}

          </div>
        </div>
      </div>
    </div>
    {% endif %}

    <div class="row">
      <div class="col-xs-12 col-lg-8 offset-lg-2">
        <div class="card">
          <div class="card-body">
            <form action="" method="post">
              {% csrf_token %}

              {% include 'accounts/registration/company-registration/step-0-general.html' with first_step=True %}

              {% include 'accounts/registration/company-registration/step-1-company-information.html' %}

              <input type="hidden" id="id_referred_by" name="referred_by" value="{{ request.GET.referred_by }}">
              <input type="hidden" id="id_next" name="next" value="{{ request.GET.next }}">
              <input type="hidden" id="id_ref" name="ref" value="{{ request.GET.ref }}">
              {{ user_form.recaptcha }}

            </form>
          </div>
        </div>
      </div>
    </div>
  </div>

  {% addtoblock 'js' %}
    <script src="{% static 'scripts/components/bootstrap-select.min.js' %}" nonce="{{ request.csp_nonce }}"></script>
    <script src="{% static 'scripts/components/forms.min.js' %}" nonce="{{ request.csp_nonce }}"></script>
    <script src="{% static 'scripts/components/datepicker.min.js' %}" nonce="{{ request.csp_nonce }}"></script>
    <script src='https://www.google.com/recaptcha/api.js' nonce="{{ request.csp_nonce }}"></script>
    <script src='https://www.google.com/recaptcha/api.js?render=6LeSO4EUAAAAAHe-rvZnboRVU_WbKhaivHpx9UXK' nonce="{{ request.csp_nonce }}"></script>
  {% endaddtoblock %}

{% endblock %}